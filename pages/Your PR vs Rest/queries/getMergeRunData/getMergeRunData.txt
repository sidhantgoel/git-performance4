SELECT gh_run_id as runId, gh_run_attempt as runAttempt, run_meta.id, pull_request_id as prId, 
json_agg(json_build_object('metric', metric, 'value', value, 'action', action, 'createdAt', run.created_at)) as metrics from run_meta join run on run.meta = run_meta.id where run_meta.pull_request_id={{this.params.prId}} and run_meta.id={{this.params.runId}} and run.metric in ({{Utils.getMetricsToShow()}}) group by run_meta.id, gh_run_attempt, gh_run_id ORDER BY run_meta.created_at DESC LIMIT 1;